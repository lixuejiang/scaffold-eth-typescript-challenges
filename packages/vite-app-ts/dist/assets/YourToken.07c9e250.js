import{C as oe,c as se,_ as A,a as Le,b as $e,d as Me,e as ve,f as he,r as xe,R as Re,S as Ve,u as De,g as ye,h as He,i as Ye,t as We,j as Se,k as Ke,p as Q,l as Xe,m as ie,B as R,D as qe,I as ke,n as Ce,A as Ge,o as Te,q as _e}from"./Main.f0d41b4f.js";import{X as Je,aa as Qe,B as be}from"./App.49a633e0.js";import{r as t,_ as $}from"./vendor.2b0f5ddb.js";import{j as C,F as Ee,a}from"./main.7218daf5.js";import"./chunk-MTWSNRX5.47c61f42.js";import{u as Ue}from"./useBreakpoint.30a2c897.js";import{P as Ze}from"./Pagination.73e23358.js";import"./index.c55abaee.js";import"./LeftOutlined.d34c8e44.js";import"./index.5be03666.js";import"./DownOutlined.ee17e4bc.js";var Pe=globalThis&&globalThis.__rest||function(n,r){var c={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(c[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)r.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(c[e[o]]=n[e[o]]);return c},et=function(r){var c=r.prefixCls,e=r.className,o=r.avatar,p=r.title,k=r.description,s=Pe(r,["prefixCls","className","avatar","title","description"]),v=t.exports.useContext(oe),B=v.getPrefixCls,f=B("list",c),T=se("".concat(f,"-item-meta"),e),w=t.exports.createElement("div",{className:"".concat(f,"-item-meta-content")},p&&t.exports.createElement("h4",{className:"".concat(f,"-item-meta-title")},p),k&&t.exports.createElement("div",{className:"".concat(f,"-item-meta-description")},k));return t.exports.createElement("div",$({},s,{className:T}),o&&t.exports.createElement("div",{className:"".concat(f,"-item-meta-avatar")},o),(p||k)&&w)},Ne=function(r){var c=r.prefixCls,e=r.children,o=r.actions,p=r.extra,k=r.className,s=r.colStyle,v=Pe(r,["prefixCls","children","actions","extra","className","colStyle"]),B=t.exports.useContext(ce),f=B.grid,T=B.itemLayout,w=t.exports.useContext(oe),d=w.getPrefixCls,b=function(){var x;return t.exports.Children.forEach(e,function(z){typeof z=="string"&&(x=!0)}),x&&t.exports.Children.count(e)>1},E=function(){return T==="vertical"?!!p:!b()},y=d("list",c),h=o&&o.length>0&&t.exports.createElement("ul",{className:"".concat(y,"-item-action"),key:"actions"},o.map(function(j,x){return t.exports.createElement("li",{key:"".concat(y,"-item-action-").concat(x)},j,x!==o.length-1&&t.exports.createElement("em",{className:"".concat(y,"-item-action-split")}))})),O=f?"div":"li",P=t.exports.createElement(O,$({},v,{className:se("".concat(y,"-item"),A({},"".concat(y,"-item-no-flex"),!E()),k)}),T==="vertical"&&p?[t.exports.createElement("div",{className:"".concat(y,"-item-main"),key:"content"},e,h),t.exports.createElement("div",{className:"".concat(y,"-item-extra"),key:"extra"},p)]:[e,h,Le(p,{key:"extra"})]);return f?t.exports.createElement($e,{flex:1,style:s},P):P};Ne.Meta=et;var tt=Ne,nt=globalThis&&globalThis.__rest||function(n,r){var c={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(c[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)r.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(c[e[o]]=n[e[o]]);return c},ce=t.exports.createContext({});ce.Consumer;function le(n){var r,c=n.pagination,e=c===void 0?!1:c,o=n.prefixCls,p=n.bordered,k=p===void 0?!1:p,s=n.split,v=s===void 0?!0:s,B=n.className,f=n.children,T=n.itemLayout,w=n.loadMore,d=n.grid,b=n.dataSource,E=b===void 0?[]:b,y=n.size,h=n.header,O=n.footer,P=n.loading,j=P===void 0?!1:P,x=n.rowKey,z=n.renderItem,W=n.locale,U=nt(n,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),V=e&&Me(e)==="object"?e:{},D=t.exports.useState(V.defaultCurrent||1),K=ve(D,2),F=K[0],de=K[1],Z=t.exports.useState(V.defaultPageSize||10),H=ve(Z,2),L=H[0],ee=H[1],Y=t.exports.useContext(oe),X=Y.getPrefixCls,te=Y.renderEmpty,q=Y.direction,i={current:1,total:0},m={},ue=function(l){return function(I,N){de(I),ee(N),e&&e[l]&&e[l](I,N)}},Ae=ue("onChange"),Be=ue("onShowSizeChange"),we=function(l,I){if(!z)return null;var N;return typeof x=="function"?N=x(l):typeof x=="string"?N=l[x]:N=l.key,N||(N="list-item-".concat(I)),m[I]=N,z(l,I)},je=function(){return!!(w||e||O)},Ie=function(l,I){return t.exports.createElement("div",{className:"".concat(l,"-empty-text")},W&&W.emptyText||I("List"))},g=X("list",o),M=j;typeof M=="boolean"&&(M={spinning:M});var ne=M&&M.spinning,G="";switch(y){case"large":G="lg";break;case"small":G="sm";break}var Oe=se(g,(r={},A(r,"".concat(g,"-vertical"),T==="vertical"),A(r,"".concat(g,"-").concat(G),G),A(r,"".concat(g,"-split"),v),A(r,"".concat(g,"-bordered"),k),A(r,"".concat(g,"-loading"),ne),A(r,"".concat(g,"-grid"),!!d),A(r,"".concat(g,"-something-after-last-item"),je()),A(r,"".concat(g,"-rtl"),q==="rtl"),r),B),S=$($($({},i),{total:E.length,current:F,pageSize:L}),e||{}),pe=Math.ceil(S.total/S.pageSize);S.current>pe&&(S.current=pe);var me=e?t.exports.createElement("div",{className:"".concat(g,"-pagination")},t.exports.createElement(Ze,$({},S,{onChange:Ae,onShowSizeChange:Be}))):null,re=he(E);e&&E.length>(S.current-1)*S.pageSize&&(re=he(E).splice((S.current-1)*S.pageSize,S.pageSize));var ge=Ue(),_=t.exports.useMemo(function(){for(var u=0;u<xe.length;u+=1){var l=xe[u];if(ge[l])return l}},[ge]),ze=t.exports.useMemo(function(){if(!!d){var u=_&&d[_]?d[_]:d.column;if(u)return{width:"".concat(100/u,"%"),maxWidth:"".concat(100/u,"%")}}},[d==null?void 0:d.column,_]),ae=ne&&t.exports.createElement("div",{style:{minHeight:53}});if(re.length>0){var fe=re.map(function(u,l){return we(u,l)}),Fe=t.exports.Children.map(fe,function(u,l){return t.exports.createElement("div",{key:m[l],style:ze},u)});ae=d?t.exports.createElement(Re,{gutter:d.gutter},Fe):t.exports.createElement("ul",{className:"".concat(g,"-items")},fe)}else!f&&!ne&&(ae=Ie(g,te));var J=S.position||"bottom";return t.exports.createElement(ce.Provider,{value:{grid:d,itemLayout:T}},t.exports.createElement("div",$({className:Oe},U),(J==="top"||J==="both")&&me,h&&t.exports.createElement("div",{className:"".concat(g,"-header")},h),t.exports.createElement(Ve,M,ae,f),O&&t.exports.createElement("div",{className:"".concat(g,"-footer")},O),w||(J==="bottom"||J==="both")&&me))}le.Item=tt;const gt=n=>{var q;const{mainnetProvider:r}=n,c=De(),e=Je(),o=ye(c),p=ye(c,e==null?void 0:e.signer),k=(q=e.account)!=null?q:"",s=o.Vendor,v=o.YourToken,B=p.Vendor,f=p.YourToken,T=t.exports.useContext(Qe),w=He(e.chainId,"fast"),d=Ye(r),b=We(T,e==null?void 0:e.signer,w),[E,y]=t.exports.useState();Se(async()=>{(async()=>{if(!v)return;const m=await v.balanceOf(k);console.log("\u{1F3F5} yourTokenBalance:",m?Te(m):"..."),y(m)})()},{provider:r});const[h,O]=t.exports.useState();t.exports.useEffect(()=>{(async()=>{if(!s)return;const m=await s.tokensPerEth();console.log("\u{1F3E6} tokensPerEth:",m?m.toString():"..."),O(m.toNumber())})()},[s]);const P=Ke(v,{contractName:"YourToken",functionName:"allowance",functionArgs:[k,s==null?void 0:s.address]});console.log("\u{1F90F} vendorApproval",P);const[j,x]=t.exports.useState(""),[z,W]=t.exports.useState(),[U,V]=t.exports.useState(!1),[D,K]=t.exports.useState(),[F,de]=t.exports.useState(),[Z,H]=t.exports.useState(!1);t.exports.useEffect(()=>{console.log("tokenSellAmount",F);const i=F&&Q(""+F);!i||(console.log("tokenSellAmountBN",i),P&&P[0].gte(i)?H(!0):H(!1),console.log("isSellAmountApproved",Z))});let L=be.from(0);D&&h&&(L=Q(""+D/parseFloat(h.toString()))),console.log("ethCostToPurchaseTokens:",L),be.from(0),F&&h&&Q(""+F/parseFloat(h.toString())),console.log("ethCostToPurchaseTokens:",L);const[ee,Y]=t.exports.useState();Se(async()=>{(async()=>{const m=await(v==null?void 0:v.balanceOf(s==null?void 0:s.address));console.log("\u{1F3F5} vendorTokenBalance:",m?Te(m):"..."),Y(m)})()},{provider:r});let X=a(Ee,{});E&&(X=a("div",{style:{padding:8,marginTop:32,width:420,margin:"auto"},children:C(ie,{title:"Transfer tokens",children:[C("div",{children:[a("div",{style:{padding:8},children:a(_e,{ensProvider:r,placeholder:"to address",address:j,onChange:x})}),a("div",{style:{padding:8},children:a(ke,{style:{textAlign:"center"},placeholder:"amount of tokens to send",value:z,onChange:i=>{W(Number(i.target.value))}})})]}),a("div",{style:{padding:8},children:a(Ce,{type:"primary",onClick:()=>{!b||b(f.transfer(j,Q(""+z)))},children:"Send Tokens"})})]})}));const te=Xe(s,"BuyTokens",1);return C(Ee,{children:[a("div",{style:{padding:8,marginTop:32,width:300,margin:"auto"},children:a(ie,{title:"Your Tokens",extra:a("a",{href:"#",children:"code"}),children:a("div",{style:{padding:8},children:a(R,{balance:E,address:void 0})})})}),X,a(qe,{}),a("div",{style:{padding:8,marginTop:32,width:300,margin:"auto"},children:C(ie,{title:"Buy Tokens",extra:a("a",{href:"#",children:"code"}),children:[C("div",{style:{padding:8},children:[h&&h," tokens per ETH"]}),C("div",{style:{padding:8},children:[a(ke,{style:{textAlign:"center"},placeholder:"amount of tokens to buy",value:D,onChange:i=>{K(Number(i.target.value))}}),a(R,{balance:L,dollarMultiplier:d,address:void 0})]}),a("div",{style:{padding:8},children:a(Ce,{type:"primary",loading:U,onClick:async()=>{!b||(V(!0),await b(B.buyTokens({value:L})),V(!1))},children:"Buy Tokens"})})]})}),C("div",{style:{padding:8,marginTop:32},children:[a("div",{children:"Vendor Token Balance:"}),a(R,{balance:ee,address:void 0})]}),C("div",{style:{padding:8},children:[a("div",{children:"Vendor ETH Balance:"}),a(R,{address:s==null?void 0:s.address})," ETH"]}),C("div",{style:{width:500,margin:"auto",marginTop:64},children:[a("div",{children:"Buy Token Events:"}),a(le,{dataSource:te,renderItem:i=>C(le.Item,{children:[a(Ge,{address:i.args[0],ensProvider:r,fontSize:16})," paid",a(R,{balance:i.args[1],address:void 0}),"ETH to get",a(R,{balance:i.args[2],address:void 0}),"Tokens"]},i.blockNumber+i.blockHash)})]})]})};export{gt as YourToken};
